<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400..800;1,400..800&display=swap"
    rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="stylesheet" href="./css/style.css">
  <title>Pizzeria</title>
</head>

<body>
  <header>
    <nav class="navbar sticky-top navbar-expand-md navbar-custom">
      <div class="container-fluid ">
        <a class="navbar-brand text_menu" href="#">Pizzeria Sofia</a>
        <button class="navbar-toggler custom-toggler" type="button" data-bs-toggle="collapse"
          data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
          aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0" id="navbar-items">
            <li class="nav-item">
              <a class="nav-link text_menu" href="#">Inicio</a>
            </li>
            <li class="nav-item">
              <a class="nav-link text_menu" href="./pages/productos.html">Productos</a>
            </li>
            <li class="nav-item">
              <a class="nav-link text_menu" href="./pages/sucursales.html">Sucursales</a>
            </li>
            <li class="nav-item">
              <a class="nav-link text_menu" href="./pages/about.html">Nosotros</a>
            </li>
            <li class="nav-item">
              <a class="nav-link text_menu" href="./pages/contacto.html">Contactos</a>
            </li>
          </ul>
    
        </div>
      </div>
    </nav>
    <div class="contenedor_banner">
      <img class="banner" src="./images/logo.jpeg" alt="logo">
    </div>
  </header>
  <!-- Carrito flotante -->
<a class="floating-cart" href="#" id="cartDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
  <i class="bi bi-cart-fill"></i>
  <span class="cart-count" id="cart-count">0</span>
</a>

<!-- Dropdown del carrito -->
<ul class="dropdown-menu dropdown-menu-end" aria-labelledby="cartDropdown">
  <li>
      <div class="dropdown-item text-center">
          <p><strong>Carrito de Compras</strong></p>
          <p id="no-items">No hay artículos en el carrito.</p>
          <div id="cart-items"></div>
      </div>
  </li>
  <li>
      <div class="dropdown-item text-center">
          <a id="whatsapp-button" href="#" class="btn btn-success" target="_blank">
              <i class="bi bi-whatsapp"></i> Enviar por WhatsApp
          </a>
      </div>
  </li>
</ul>
  <main>
    <div class="contenedor_promo_tit">
      <h1 class="titulo_main">Promociones</h1>
    </div>
    <section class="gallery">
      <div class="card gallery-item" style="width: 15rem;">
        <div class="banner">
          <h5 class="banner-text">SALE!</h5>
        </div>
        <img src="./images/promo1.jpeg" class="card-img-top" alt="imagen de pizz y empanada">
        <div class="card-body card_bg">
          <h5 class="card-title card_color">Promo 01</h5>
          <p class="card-text card_color">Una Grande de muzzarella y media docena de empanadas.</p>
          <p class="precio_combo card_color">$15000</p>
          <button class="btn btn-primary" onclick="addItemToCart('Promo1', 15000)">Añadir al carrito</button>

        </div>
      </div>
      <div class="card gallery-item" style="width: 15rem;">
        <div class="banner">
          <h5 class="banner-text">SALE!</h5>
        </div>
        <img src="./images/promo2.jpeg" class="card-img-top" alt="imagen de pizz y empanada">
        <div class="card-body card_bg">
          <h5 class="card-title card_color">Promo 02</h5>
          <p class="card-text card_color">Una grande de muzzarella y una grande especial.</p>
          <p class="precio_combo card_color">$19800</p>
          <button class="btn btn-primary" onclick="addItemToCart('Promo2', 19800)">Añadir al carrito</button>
        </div>
      </div>
      <div class="card gallery-item" style="width: 15rem;">
        <div class="banner">
          <h5 class="banner-text">SALE!</h5>
        </div>
        <img src="./images/promo3.jpeg" class="card-img-top" alt="imagen de pizz y empanada">
        <div class="card-body card_bg">
          <h5 class="card-title card_color ">Promo 03</h5>
          <p class="card-text card_color">Una docena de empanadas al horno mas media docena de empanadas fritas.</p>
          <p class="precio_combo card_color">$14000</p>
          <button class="btn btn-primary" onclick="addItemToCart('Promo2', 14000)">Añadir al carrito</button>
        </div>
      </div>
      <div class="card gallery-item" style="width: 15rem;">
        <div class="banner">
          <h5 class="banner-text">SALE!</h5>
        </div>
        <img src="./images/promo4.jpeg" class="card-img-top" alt="imagen de pizz y empanada">
        <div class="card-body card_bg">
          <h5 class="card-title card_color">Promo 04</h5>
          <p class="card-text card_color">Una docena de empanadas mas una grande de muazzarella o una especial.</p>
          <p class="precio_combo card_color">$20000</p>
          <button class="btn btn-primary" onclick="addItemToCart('Promo4', 20000)">Añadir al carrito</button>
        </div>
      </div>

      </div>


    </section>
    <!-- Toast (Popup) de Producto Agregado -->
<div class="toast-container position-fixed bottom-0 end-0 p-3">
  <div id="productToast" class="toast align-items-center text-white bg-success border-0" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="d-flex">
      <div class="toast-body">
        Producto agregado al carrito.
      </div>
      <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
    </div>
  </div>
</div>
  </main>
  <footer>
    <div class="footer_contenedor">
      <p>&copy; 2024 CoderhouseCamp</p>
      <div class="social_media">
        <a href="https://facebook.com" target="_blank" class="social_icon"><i class="fab fa-facebook-f"></i></a>
        <a href="https://twitter.com" target="_blank" class="social_icon"><i class="fab fa-x"></i></a>
        <a href="https://instagram.com" target="_blank" class="social_icon"><i class="fab fa-instagram"></i></a>
        <a href="https://linkedin.com" target="_blank" class="social_icon"><i class="fab fa-linkedin-in"></i></a>
      </div>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
  <script>
     


 // Array para almacenar los items del carrito
 let cart = [];

// Función para añadir un item al carrito
function addItemToCart(productName, productPrice) {
  // Añadir el nuevo producto al carrito
  cart.push({name: productName, price: productPrice});

  // Actualizar el contador de productos en el carrito
  document.getElementById('cart-count').textContent = cart.length;

  // Mostrar el carrito
  updateCartDropdown();

  // Mostrar el popup de "Producto agregado"
  let toastElement = document.getElementById('productToast');
    let toast = new bootstrap.Toast(toastElement);
    toast.show();
  }
// Función para actualizar el contenido del carrito en el dropdown
function updateCartDropdown() {
  const cartItemsContainer = document.getElementById('cart-items');
  const noItemsText = document.getElementById('no-items');
  const whatsappButton = document.getElementById('whatsapp-button');
  let totalPrice = 0; // Inicializar el total

  // Limpiar el contenido del contenedor de items
  cartItemsContainer.innerHTML = '';

  if (cart.length === 0) {
    noItemsText.style.display = 'block'; // Mostrar el mensaje de "no hay artículos"
  } else {
    noItemsText.style.display = 'none'; // Ocultar el mensaje

    let cartDetails = "Quiero hacer el siguiente pedido:\n";
/////////////////////////////////////////////////////
// Recorrer los productos en el carrito

cart.forEach((item, index) => {
    const itemElement = document.createElement('div');
    itemElement.className = 'd-flex justify-content-between align-items-center';
    itemElement.innerHTML = `
        <span>${item.name}</span>
        <span>$${item.price.toFixed(2)}</span>
        <button class="btn btn-danger btn-sm" onclick="removeItemFromCart(${index})">-</button>
    `;
    cartItemsContainer.appendChild(itemElement);

      

      // Añadir el detalle del producto al mensaje de WhatsApp
      cartDetails += `${item.name} - $${item.price.toFixed(2)}\n`;
       // Sumar el precio del producto al total
       totalPrice += item.price;
    });
       // Mostrar el total en el carrito
       const totalElement = document.createElement('div');
        totalElement.className = 'd-flex justify-content-between mt-3';
        totalElement.innerHTML = `
            <strong>Total:</strong>
            <strong>$${totalPrice.toFixed(2)}</strong>
        `;
        cartItemsContainer.appendChild(totalElement);


    // Crear el enlace de WhatsApp con el mensaje
    cartDetails += `Total: $${totalPrice.toFixed(2)}`;
    const whatsappLink = `https://wa.me/+5491136412422?text=${encodeURIComponent(cartDetails)}`;
    whatsappButton.href = whatsappLink; // Establecer el link en el botón
  }
}
function removeItemFromCart(index) {
    cart.splice(index, 1); // Eliminar el producto del carrito
    document.getElementById('cart-count').textContent = cart.length; // Actualizar el contador
    updateCartDropdown(); // Actualizar el dropdown para reflejar los cambios
}






    // Función para agregar un ítem al menú del navbar
  
  </script>
</body>

</html>